(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{162:function(t,n,s){"use strict";s.r(n);var a=s(0),e=Object(a.a)({},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"cli-plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cli-plugins","aria-hidden":"true"}},[t._v("#")]),t._v(" CLI Plugins "),s("Badge",{attrs:{text:"3.0.0+"}})],1),t._v(" "),t._m(0),t._v(" "),s("p",[t._v("A typical Config plugin's folder structure looks like the following:")]),t._v(" "),t._m(1),t._m(2),t._v(" "),t._m(3),t._v(" "),s("p",[t._v("In addition, @node-sitecore/cli's built-in commands and config modules are also all implemented as service plugins.")]),t._v(" "),s("p",[t._v("A service plugin should export a function which receives two arguments:")]),t._v(" "),t._m(4),t._v(" "),s("p",[t._v("The API allows service plugins to extend/modify the internal config for different environments and inject additional commands to nsc-cli.\nExample:")]),t._v(" "),t._m(5),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9)])},[function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("A CLI plugin is an npm package that can add additional features to a "),n("code",[this._v("@node-sitecore/cli")]),this._v(" project.\nIt should always contain a Service Plugin as its main export.")])},function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[this._v(".\n├── readme.md\n├── index.js      # CLI service plugin used by @node-sitecore/cli\n├── config.js     # (optional) Config service plugin used by @node-sitecore/config\n└── package.json\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h3",{attrs:{id:"cliservice-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cliservice-plugin","aria-hidden":"true"}},[this._v("#")]),this._v(" CliService Plugin")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("CliService plugins are loaded automatically when a CliService instance is created - i.e. everytime when a "),n("code",[this._v("nsc")]),this._v(" command is invoked.")])},function(){var t=this.$createElement,n=this._self._c||t;return n("ul",[n("li",[this._v("A PluginAPI instance,")]),this._v(" "),n("li",[this._v("An object containing project local options specified in "),n("code",[this._v(".nscrc")]),this._v(":")])])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("api"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" helpConfig "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    description"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Run test'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    usage"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'<value> [options]'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// display: nsc test [options]")]),t._v("\n    options"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),s("span",{attrs:{class:"token comment"}},[t._v("// String 'nsc cmd -p **/**.spec.js'")]),t._v("\n       "),s("span",{attrs:{class:"token string"}},[t._v("'-p, --pattern <pattern>'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         type"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" String"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         description"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'String example'")]),t._v("\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n       "),s("span",{attrs:{class:"token comment"}},[t._v("// Boolean  'nsc cmd --no-colors'")]),t._v("\n       "),s("span",{attrs:{class:"token string"}},[t._v("'--no-colors'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         description"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Boolean example'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         type"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Boolean\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n       "),s("span",{attrs:{class:"token comment"}},[t._v("// Boolean  'nsc cmd --node-reuse true'")]),t._v("\n       "),s("span",{attrs:{class:"token string"}},[t._v("'-r, --node-reuse <boolean>'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         description"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Boolean example with explicite value'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         type"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Boolean"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         transform"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" v "),s("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'true'")]),t._v("\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n       "),s("span",{attrs:{class:"token comment"}},[t._v("// Number 'nsc cmd -m 10'")]),t._v("\n       "),s("span",{attrs:{class:"token string"}},[t._v("'-m, --maxcpucount <cpuNb>'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         description"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Number example'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         type"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Number\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n       "),s("span",{attrs:{class:"token comment"}},[t._v("// Enum 'nsc cmd -e Release'")]),t._v("\n       "),s("span",{attrs:{class:"token string"}},[t._v("'-e, --enum <enumValue>'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         description"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Enum value'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         pattern"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token regex"}},[t._v("/^(Release|Debug)$/")]),t._v("\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n       "),s("span",{attrs:{class:"token comment"}},[t._v("// Array 'nsc cmd --paths Path1,Path2")]),t._v("\n       "),s("span",{attrs:{class:"token string"}},[t._v("'--paths'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         type"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Array\n         description"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Specify a list of path'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  api"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("registerCommand")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'test'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" helpConfig"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("commander"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("value"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" args"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// any arguments which not match with options")]),t._v("\n     "),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("pattern"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" noColors"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nodeReuse"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" maxcpucount"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("enum")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" paths"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" commander"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n     "),s("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"warning custom-block"},[n("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),n("p",[this._v("You should not extend config here. There is a "),n("code",[this._v("config.js")]),this._v(" file to do that.")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h2",{attrs:{id:"distributing-the-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#distributing-the-plugin","aria-hidden":"true"}},[this._v("#")]),this._v(" Distributing the Plugin")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("For a CLI plugin to be usable by other developers, it must be published\non npm following the name convention "),n("code",[this._v("nsc-cli-plugin-<name>")]),this._v(".\nFollowing the name convention allows your plugin to be:")])},function(){var t=this.$createElement,n=this._self._c||t;return n("ul",[n("li",[this._v("Discoverable by "),n("code",[this._v("@node-sitecore/cli")]),this._v(",")]),this._v(" "),n("li",[this._v("Discoverable by other developers via searching.")])])}],!1,null,null,null);e.options.__file="cli-plugins.md";n.default=e.exports}}]);